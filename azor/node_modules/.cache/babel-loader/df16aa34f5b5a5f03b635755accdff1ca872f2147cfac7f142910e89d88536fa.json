{"ast":null,"code":"import _slicedToArray from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useState}from\"react\";import Badge from\"react-bootstrap/esm/Badge\";import Table from\"react-bootstrap/Table\";import{useBookingsContext}from\"../hooks/useBookingsContext\";import BookingsRows from\"./BookingsRows\";import{useAuthContext}from\"../hooks/useAuthContext\";import Dropdown from\"react-bootstrap/Dropdown\";import DropdownButton from\"react-bootstrap/DropdownButton\";import Form from\"react-bootstrap/Form\";import InputGroup from\"react-bootstrap/InputGroup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AdminBookingsTable=function AdminBookingsTable(){var _useAuthContext=useAuthContext(),user=_useAuthContext.user;var _useBookingsContext=useBookingsContext(),bookings=_useBookingsContext.bookings,dispatch=_useBookingsContext.dispatch;console.log(bookings);useEffect(function(){var fetchBookings=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/bookings/admin\",{headers:{Authorization:\"Bearer \".concat(user.token)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;// pass to a variable to use the data\n// check if response is ok\nif(response.ok){dispatch({type:\"SET_BOOKINGS\",payload:json});}case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchBookings(){return _ref.apply(this,arguments);};}();if(user){fetchBookings();}},[dispatch,user]);//\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];useEffect(function(){var data=JSON.parse(localStorage.getItem(\"user\"));if(data){setData(data);}},[]);var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setsearchTerm=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];// selected value in filter\nvar handleSelect=function handleSelect(e){setValue(e);};var handleSubmit=function handleSubmit(e){e.preventDefault();setsearchTerm(\"\");};//\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Control,{\"aria-label\":\"Text input with dropdown button\",placeholder:\"Search\",onChange:function onChange(event){setsearchTerm(event.target.value);console.log(searchTerm);}}),/*#__PURE__*/_jsxs(DropdownButton,{variant:\"secondary\",title:\"Filter by\",id:\"input-group-dropdown-2\",align:\"end\",onSelect:handleSelect,children:[/*#__PURE__*/_jsx(Dropdown.Item,{eventKey:\"brand\",children:\"Brand\"}),/*#__PURE__*/_jsx(Dropdown.Divider,{}),/*#__PURE__*/_jsx(Dropdown.Item,{eventKey:\"stats\",children:\"Status\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(Table,{hover:true,responsive:true,variant:\"light\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Booking ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time Slot\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Complete\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cancel\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bookings&&bookings.filter(function(val){if(searchTerm==\"\"){return val;}else if(val.stats.toLowerCase().includes(searchTerm.toLowerCase())){return val;}}).map(function(booking){return/*#__PURE__*/_jsx(BookingsRows,{booking:booking},booking._id);})})]})})]});};export default AdminBookingsTable;","map":{"version":3,"names":["React","useEffect","useState","Badge","Table","useBookingsContext","BookingsRows","useAuthContext","Dropdown","DropdownButton","Form","InputGroup","AdminBookingsTable","user","bookings","dispatch","console","log","fetchBookings","fetch","headers","Authorization","token","response","json","ok","type","payload","data","setData","JSON","parse","localStorage","getItem","searchTerm","setsearchTerm","value","setValue","handleSelect","e","handleSubmit","preventDefault","event","target","filter","val","stats","toLowerCase","includes","map","booking","_id"],"sources":["C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/src/components/tables/AdminBookingsTable.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Badge from \"react-bootstrap/esm/Badge\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport { useBookingsContext } from \"../hooks/useBookingsContext\";\r\nimport BookingsRows from \"./BookingsRows\";\r\nimport { useAuthContext } from \"../hooks/useAuthContext\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\n\r\nconst AdminBookingsTable = () => {\r\n  const { user } = useAuthContext();\r\n  const { bookings, dispatch } = useBookingsContext();\r\n  console.log(bookings);\r\n  useEffect(() => {\r\n    const fetchBookings = async () => {\r\n      const response = await fetch(\"/api/bookings/admin\", {\r\n        headers: { Authorization: `Bearer ${user.token}` },\r\n      }); // fetch data from the server\r\n      const json = await response.json(); // pass to a variable to use the data\r\n\r\n      // check if response is ok\r\n      if (response.ok) {\r\n        dispatch({ type: \"SET_BOOKINGS\", payload: json });\r\n      }\r\n    };\r\n    if (user) {\r\n      fetchBookings();\r\n    }\r\n  }, [dispatch, user]);\r\n  //\r\n  const [data, setData] = useState([]);\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (data) {\r\n      setData(data);\r\n    }\r\n  }, []);\r\n\r\n  const [searchTerm, setsearchTerm] = useState(\"\");\r\n  const [value, setValue] = useState(\"\"); // selected value in filter\r\n\r\n  const handleSelect = (e) => {\r\n    setValue(e);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setsearchTerm(\"\");\r\n  };\r\n\r\n  //\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={handleSubmit}>\r\n        <InputGroup className=\"mb-3\">\r\n          <Form.Control\r\n            aria-label=\"Text input with dropdown button\"\r\n            placeholder=\"Search\"\r\n            onChange={(event) => {\r\n              setsearchTerm(event.target.value);\r\n              console.log(searchTerm);\r\n            }}\r\n          />\r\n\r\n          <DropdownButton\r\n            variant=\"secondary\"\r\n            title=\"Filter by\"\r\n            id=\"input-group-dropdown-2\"\r\n            align=\"end\"\r\n            onSelect={handleSelect}\r\n          >\r\n            <Dropdown.Item eventKey=\"brand\">Brand</Dropdown.Item>\r\n            <Dropdown.Divider />\r\n            <Dropdown.Item eventKey=\"stats\">Status</Dropdown.Item>\r\n          </DropdownButton>\r\n        </InputGroup>\r\n      </form>\r\n      {/*  */}\r\n      <div className=\"\">\r\n        <Table hover responsive variant=\"light\">\r\n          <thead>\r\n            <tr>\r\n              <th>Booking ID</th>\r\n              <th>First Name</th>\r\n              <th>Date</th>\r\n              <th>Time Slot</th>\r\n              <th>Status</th>\r\n              <th>Complete</th>\r\n              <th>Cancel</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {bookings &&\r\n              bookings\r\n                .filter((val) => {\r\n                  if (searchTerm == \"\") {\r\n                    return val;\r\n                  } else if (\r\n                    val.stats.toLowerCase().includes(searchTerm.toLowerCase())\r\n                  ) {\r\n                    return val;\r\n                  }\r\n                })\r\n                .map((booking) => (\r\n                  <BookingsRows key={booking._id} booking={booking} />\r\n                ))}\r\n          </tbody>\r\n        </Table>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminBookingsTable;\r\n"],"mappings":"mcAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,MAAK,KAAM,2BAA2B,CAC7C,MAAOC,MAAK,KAAM,uBAAuB,CACzC,OAASC,kBAAkB,KAAQ,6BAA6B,CAChE,MAAOC,aAAY,KAAM,gBAAgB,CACzC,OAASC,cAAc,KAAQ,yBAAyB,CACxD,MAAOC,SAAQ,KAAM,0BAA0B,CAC/C,MAAOC,eAAc,KAAM,gCAAgC,CAC3D,MAAOC,KAAI,KAAM,sBAAsB,CACvC,MAAOC,WAAU,KAAM,4BAA4B,CAAC,6IAEpD,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,EAAS,CAC/B,oBAAiBL,cAAc,EAAE,CAAzBM,IAAI,iBAAJA,IAAI,CACZ,wBAA+BR,kBAAkB,EAAE,CAA3CS,QAAQ,qBAARA,QAAQ,CAAEC,QAAQ,qBAARA,QAAQ,CAC1BC,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC,CACrBb,SAAS,CAAC,UAAM,CACd,GAAMiB,cAAa,4FAAG,6KACGC,MAAK,CAAC,qBAAqB,CAAE,CAClDC,OAAO,CAAE,CAAEC,aAAa,kBAAYR,IAAI,CAACS,KAAK,CAAG,CACnD,CAAC,CAAC,QAFIC,QAAQ,qCAGKA,SAAQ,CAACC,IAAI,EAAE,QAA5BA,IAAI,eAA0B;AAEpC;AACA,GAAID,QAAQ,CAACE,EAAE,CAAE,CACfV,QAAQ,CAAC,CAAEW,IAAI,CAAE,cAAc,CAAEC,OAAO,CAAEH,IAAK,CAAC,CAAC,CACnD,CAAC,sDACF,kBAVKN,cAAa,0CAUlB,CACD,GAAIL,IAAI,CAAE,CACRK,aAAa,EAAE,CACjB,CACF,CAAC,CAAE,CAACH,QAAQ,CAAEF,IAAI,CAAC,CAAC,CACpB;AACA,cAAwBX,QAAQ,CAAC,EAAE,CAAC,wCAA7B0B,IAAI,eAAEC,OAAO,eACpB5B,SAAS,CAAC,UAAM,CACd,GAAM2B,KAAI,CAAGE,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CACrD,GAAIL,IAAI,CAAE,CACRC,OAAO,CAACD,IAAI,CAAC,CACf,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,eAAoC1B,QAAQ,CAAC,EAAE,CAAC,yCAAzCgC,UAAU,eAAEC,aAAa,eAChC,eAA0BjC,QAAQ,CAAC,EAAE,CAAC,yCAA/BkC,KAAK,eAAEC,QAAQ,eAAkB;AAExC,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAC1BF,QAAQ,CAACE,CAAC,CAAC,CACb,CAAC,CAED,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAID,CAAC,CAAK,CAC1BA,CAAC,CAACE,cAAc,EAAE,CAClBN,aAAa,CAAC,EAAE,CAAC,CACnB,CAAC,CAED;AAEA,mBACE,wCACE,aAAM,QAAQ,CAAEK,YAAa,uBAC3B,MAAC,UAAU,EAAC,SAAS,CAAC,MAAM,wBAC1B,KAAC,IAAI,CAAC,OAAO,EACX,aAAW,iCAAiC,CAC5C,WAAW,CAAC,QAAQ,CACpB,QAAQ,CAAE,kBAACE,KAAK,CAAK,CACnBP,aAAa,CAACO,KAAK,CAACC,MAAM,CAACP,KAAK,CAAC,CACjCpB,OAAO,CAACC,GAAG,CAACiB,UAAU,CAAC,CACzB,CAAE,EACF,cAEF,MAAC,cAAc,EACb,OAAO,CAAC,WAAW,CACnB,KAAK,CAAC,WAAW,CACjB,EAAE,CAAC,wBAAwB,CAC3B,KAAK,CAAC,KAAK,CACX,QAAQ,CAAEI,YAAa,wBAEvB,KAAC,QAAQ,CAAC,IAAI,EAAC,QAAQ,CAAC,OAAO,mBAAsB,cACrD,KAAC,QAAQ,CAAC,OAAO,IAAG,cACpB,KAAC,QAAQ,CAAC,IAAI,EAAC,QAAQ,CAAC,OAAO,oBAAuB,GACvC,GACN,EACR,cAEP,YAAK,SAAS,CAAC,EAAE,uBACf,MAAC,KAAK,EAAC,KAAK,MAAC,UAAU,MAAC,OAAO,CAAC,OAAO,wBACrC,oCACE,mCACE,kCAAmB,cACnB,kCAAmB,cACnB,4BAAa,cACb,iCAAkB,cAClB,8BAAe,cACf,gCAAiB,cACjB,8BAAe,GACZ,EACC,cACR,uBACGxB,QAAQ,EACPA,QAAQ,CACL8B,MAAM,CAAC,SAACC,GAAG,CAAK,CACf,GAAIX,UAAU,EAAI,EAAE,CAAE,CACpB,MAAOW,IAAG,CACZ,CAAC,IAAM,IACLA,GAAG,CAACC,KAAK,CAACC,WAAW,EAAE,CAACC,QAAQ,CAACd,UAAU,CAACa,WAAW,EAAE,CAAC,CAC1D,CACA,MAAOF,IAAG,CACZ,CACF,CAAC,CAAC,CACDI,GAAG,CAAC,SAACC,OAAO,qBACX,KAAC,YAAY,EAAmB,OAAO,CAAEA,OAAQ,EAA9BA,OAAO,CAACC,GAAG,CAAsB,EACrD,CAAC,EACA,GACF,EACJ,GACL,CAEP,CAAC,CAED,cAAevC,mBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}