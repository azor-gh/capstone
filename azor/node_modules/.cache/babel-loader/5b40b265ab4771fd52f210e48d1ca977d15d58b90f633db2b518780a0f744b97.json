{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useState}from\"react\";import Table from\"react-bootstrap/Table\";import{useAuthContext}from\"../hooks/useAuthContext\";import{useBookingsContext}from\"../hooks/useBookingsContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BookingsTable=function BookingsTable(){var _useBookingsContext=useBookingsContext(),bookings=_useBookingsContext.bookings,dispatch=_useBookingsContext.dispatch;var _useAuthContext=useAuthContext(),user=_useAuthContext.user;useEffect(function(){var fetchBookings=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/bookings/admin\",{headers:{Authorization:\"Bearer \".concat(user.token)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;// pass to a variable to use the data\n// check if response is ok\nif(response.ok){dispatch({type:\"SET_BOOKINGS\",payload:json});}case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchBookings(){return _ref.apply(this,arguments);};}();fetchBookings();},[dispatch]);console.log(bookings);return/*#__PURE__*/_jsx(\"div\",{className:\"m-5 \",children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Booking Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time Slot\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date created\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bookings&&bookings.map(function(booking,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:booking._id}),/*#__PURE__*/_jsx(\"td\",{children:booking.first_name}),/*#__PURE__*/_jsx(\"td\",{children:booking.date}),/*#__PURE__*/_jsx(\"td\",{children:booking.time_slot}),/*#__PURE__*/_jsx(\"td\",{children:booking.createdAt})]},index);})})]})});};export default BookingsTable;","map":{"version":3,"names":["React","useEffect","useState","Table","useAuthContext","useBookingsContext","BookingsTable","bookings","dispatch","user","fetchBookings","fetch","headers","Authorization","token","response","json","ok","type","payload","console","log","map","booking","index","_id","first_name","date","time_slot","createdAt"],"sources":["C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/src/components/tables/BookingsTable.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport { useAuthContext } from \"../hooks/useAuthContext\";\r\nimport { useBookingsContext } from \"../hooks/useBookingsContext\";\r\n\r\nconst BookingsTable = () => {\r\n  const { bookings, dispatch } = useBookingsContext();\r\n  const { user } = useAuthContext();\r\n\r\n  useEffect(() => {\r\n    const fetchBookings = async () => {\r\n      const response = await fetch(\"/api/bookings/admin\", {\r\n        headers: { Authorization: `Bearer ${user.token}` },\r\n      }); // fetch data from the server\r\n      const json = await response.json(); // pass to a variable to use the data\r\n\r\n      // check if response is ok\r\n      if (response.ok) {\r\n        dispatch({ type: \"SET_BOOKINGS\", payload: json });\r\n      }\r\n    };\r\n    fetchBookings();\r\n  }, [dispatch]);\r\n\r\n  console.log(bookings);\r\n  return (\r\n    <div className=\"m-5 \">\r\n      <Table striped bordered hover variant=\"dark\">\r\n        <thead>\r\n          <tr>\r\n            <th>Booking Id</th>\r\n            <th>First Name</th>\r\n            <th>Date</th>\r\n            <th>Time Slot</th>\r\n            <th>Date created</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {bookings &&\r\n            bookings.map((booking, index) => (\r\n              <tr key={index}>\r\n                <td>{booking._id}</td>\r\n                <td>{booking.first_name}</td>\r\n                <td>{booking.date}</td>\r\n                <td>{booking.time_slot}</td>\r\n                <td>{booking.createdAt}</td>\r\n              </tr>\r\n            ))}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookingsTable;\r\n"],"mappings":"kTAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,MAAK,KAAM,uBAAuB,CACzC,OAASC,cAAc,KAAQ,yBAAyB,CACxD,OAASC,kBAAkB,KAAQ,6BAA6B,CAAC,wFAEjE,GAAMC,cAAa,CAAG,QAAhBA,cAAa,EAAS,CAC1B,wBAA+BD,kBAAkB,EAAE,CAA3CE,QAAQ,qBAARA,QAAQ,CAAEC,QAAQ,qBAARA,QAAQ,CAC1B,oBAAiBJ,cAAc,EAAE,CAAzBK,IAAI,iBAAJA,IAAI,CAEZR,SAAS,CAAC,UAAM,CACd,GAAMS,cAAa,4FAAG,6KACGC,MAAK,CAAC,qBAAqB,CAAE,CAClDC,OAAO,CAAE,CAAEC,aAAa,kBAAYJ,IAAI,CAACK,KAAK,CAAG,CACnD,CAAC,CAAC,QAFIC,QAAQ,qCAGKA,SAAQ,CAACC,IAAI,EAAE,QAA5BA,IAAI,eAA0B;AAEpC;AACA,GAAID,QAAQ,CAACE,EAAE,CAAE,CACfT,QAAQ,CAAC,CAAEU,IAAI,CAAE,cAAc,CAAEC,OAAO,CAAEH,IAAK,CAAC,CAAC,CACnD,CAAC,sDACF,kBAVKN,cAAa,0CAUlB,CACDA,aAAa,EAAE,CACjB,CAAC,CAAE,CAACF,QAAQ,CAAC,CAAC,CAEdY,OAAO,CAACC,GAAG,CAACd,QAAQ,CAAC,CACrB,mBACE,YAAK,SAAS,CAAC,MAAM,uBACnB,MAAC,KAAK,EAAC,OAAO,MAAC,QAAQ,MAAC,KAAK,MAAC,OAAO,CAAC,MAAM,wBAC1C,oCACE,mCACE,kCAAmB,cACnB,kCAAmB,cACnB,4BAAa,cACb,iCAAkB,cAClB,oCAAqB,GAClB,EACC,cACR,uBACGA,QAAQ,EACPA,QAAQ,CAACe,GAAG,CAAC,SAACC,OAAO,CAAEC,KAAK,qBAC1B,mCACE,oBAAKD,OAAO,CAACE,GAAG,EAAM,cACtB,oBAAKF,OAAO,CAACG,UAAU,EAAM,cAC7B,oBAAKH,OAAO,CAACI,IAAI,EAAM,cACvB,oBAAKJ,OAAO,CAACK,SAAS,EAAM,cAC5B,oBAAKL,OAAO,CAACM,SAAS,EAAM,GALrBL,KAAK,CAMT,EACN,CAAC,EACE,GACF,EACJ,CAEV,CAAC,CAED,cAAelB,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}