{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Container from\"react-bootstrap/esm/Container\";import ActivityCard from\"../../components/cards/users/ActivityCard\";import AddBookingBtn from\"../../components/buttons/AddBookingBtn\";import{useBookingsContext}from\"../../components/hooks/useBookingsContext\";import Spinner from\"react-bootstrap/esm/Spinner\";import Card from\"react-bootstrap/Card\";import{Link}from\"react-router-dom\";import Row from\"react-bootstrap/esm/Row\";import Col from\"react-bootstrap/esm/Col\";import{useAuthContext}from\"../../components/hooks/useAuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserHome=function UserHome(){var _useBookingsContext=useBookingsContext(),bookings=_useBookingsContext.bookings,dispatch=_useBookingsContext.dispatch;var _useAuthContext=useAuthContext(),user=_useAuthContext.user;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];useEffect(function(){var fetchBookings=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/bookings\",{headers:{Authorization:\"Bearer \".concat(user.token)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;// pass to a variable to use the data\n// check if response is ok\nif(response.ok){dispatch({type:\"SET_BOOKINGS\",payload:json});setLoading(false);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchBookings(){return _ref.apply(this,arguments);};}();if(user){fetchBookings();}},[dispatch,user]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{height:\"100vh\"},children:[/*#__PURE__*/_jsx(Container,{className:\"mt-3 border-bottom border-secondary\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Home\"})}),/*#__PURE__*/_jsxs(Container,{className:\"d-flex flex-column mt-2\",children:[/*#__PURE__*/_jsx(Card,{bg:\"dark\",className:\"w-100 border-secondary\",style:{borderRadius:0},children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-white\",children:[/*#__PURE__*/_jsx(Card.Title,{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Get rid of your worries for good.\"})})}),/*#__PURE__*/_jsx(Card.Text,{children:\"It's not all about money though - your motorcycle's service will also cover key safety areas such as brakes, steering, suspension and tyres and can help to spot potential problems before they take you off the road.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ms-auto\",children:/*#__PURE__*/_jsx(AddBookingBtn,{})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",style:{position:\"relative\",paddingLeft:0,paddingRight:0},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 mb-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Appoinments\"}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(Link,{to:\"/account/bookings\",children:\"See All\"})})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\",size:\"lg\",className:\"mt-5\"})}):/*#__PURE__*/_jsx(Row,{children:bookings!==\"\"?bookings.slice(0,4).map(function(booking){return/*#__PURE__*/_jsx(Col,{sm:12,md:6,children:/*#__PURE__*/_jsx(ActivityCard,{booking:booking})},booking._id);}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",children:[\"It seems you don't have any appointment yet.\",\" \"]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-primary text-center\",children:\"Book an appointment now!\"})]})})]})]})]})});};export default UserHome;","map":{"version":3,"names":["React","useEffect","useState","Container","ActivityCard","AddBookingBtn","useBookingsContext","Spinner","Card","Link","Row","Col","useAuthContext","UserHome","bookings","dispatch","user","loading","setLoading","fetchBookings","fetch","headers","Authorization","token","response","json","ok","type","payload","height","borderRadius","position","paddingLeft","paddingRight","slice","map","booking","_id"],"sources":["C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/src/pages/user/UserHome.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Container from \"react-bootstrap/esm/Container\";\r\nimport ActivityCard from \"../../components/cards/users/ActivityCard\";\r\nimport AddBookingBtn from \"../../components/buttons/AddBookingBtn\";\r\nimport { useBookingsContext } from \"../../components/hooks/useBookingsContext\";\r\nimport Spinner from \"react-bootstrap/esm/Spinner\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Row from \"react-bootstrap/esm/Row\";\r\nimport Col from \"react-bootstrap/esm/Col\";\r\nimport { useAuthContext } from \"../../components/hooks/useAuthContext\";\r\n\r\nconst UserHome = () => {\r\n  const { bookings, dispatch } = useBookingsContext();\r\n  const { user } = useAuthContext();\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchBookings = async () => {\r\n      const response = await fetch(\"/api/bookings\", {\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n      });\r\n\r\n      // fetch data from the server\r\n      const json = await response.json(); // pass to a variable to use the data\r\n\r\n      // check if response is ok\r\n      if (response.ok) {\r\n        dispatch({ type: \"SET_BOOKINGS\", payload: json });\r\n        setLoading(false);\r\n      }\r\n    };\r\n    if (user) {\r\n      fetchBookings();\r\n    }\r\n  }, [dispatch, user]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ height: \"100vh\" }}>\r\n        <Container className=\"mt-3 border-bottom border-secondary\">\r\n          <h1>Home</h1>\r\n        </Container>\r\n        <Container className=\"d-flex flex-column mt-2\">\r\n          <Card\r\n            bg=\"dark\"\r\n            className=\"w-100 border-secondary\"\r\n            style={{ borderRadius: 0 }}\r\n          >\r\n            <Card.Body className=\"text-white\">\r\n              <Card.Title className=\"mb-3\">\r\n                <h3>\r\n                  <strong>Get rid of your worries for good.</strong>\r\n                </h3>\r\n              </Card.Title>\r\n\r\n              <Card.Text>\r\n                It's not all about money though - your motorcycle's service will\r\n                also cover key safety areas such as brakes, steering, suspension\r\n                and tyres and can help to spot potential problems before they\r\n                take you off the road.\r\n              </Card.Text>\r\n              <div className=\"ms-auto\">\r\n                <AddBookingBtn />\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n\r\n          <div\r\n            className=\"d-flex flex-column\"\r\n            style={{ position: \"relative\", paddingLeft: 0, paddingRight: 0 }}\r\n          >\r\n            <div className=\"mt-5 mb-3\">\r\n              <h2>Recent Appoinments</h2>\r\n              <h5>\r\n                <Link to={`/account/bookings`}>See All</Link>\r\n              </h5>\r\n            </div>\r\n            {loading ? (\r\n              <div className=\"d-flex justify-content-center\">\r\n                <Spinner\r\n                  animation=\"border\"\r\n                  variant=\"primary\"\r\n                  size=\"lg\"\r\n                  className=\"mt-5\"\r\n                />\r\n              </div>\r\n            ) : (\r\n              <Row>\r\n                {bookings !== \"\" ? (\r\n                  bookings.slice(0, 4).map((booking) => (\r\n                    <Col sm={12} md={6} key={booking._id}>\r\n                      <ActivityCard booking={booking} />\r\n                    </Col>\r\n                  ))\r\n                ) : (\r\n                  <>\r\n                    <h1 className=\"text-center\">\r\n                      It seems you don't have any appointment yet.{\" \"}\r\n                    </h1>\r\n                    <h2 className=\"text-primary text-center\">\r\n                      Book an appointment now!\r\n                    </h2>\r\n                  </>\r\n                )}\r\n              </Row>\r\n            )}\r\n          </div>\r\n        </Container>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserHome;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}