{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useState}from\"react\";import Badge from\"react-bootstrap/esm/Badge\";import Table from\"react-bootstrap/Table\";import{useBookingsContext}from\"../hooks/useBookingsContext\";import{useUsersContext}from\"../hooks/useUsersContext\";import BookingsRows from\"./BookingsRows\";import{useAuthContext}from\"../hooks/useAuthContext\";import AdminUserRows from\"./AdminUserRows\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminUserListTable=function AdminUserListTable(){var _useAuthContext=useAuthContext(),user=_useAuthContext.user;var _useUsersContext=useUsersContext(),users=_useUsersContext.users,dispatch=_useUsersContext.dispatch;console.log(users);useEffect(function(){var fetchUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/users/\",{headers:{Authorization:\"Bearer \".concat(user.token)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;// pass to a variable to use the data\n// check if response is ok\nif(response.ok){dispatch({type:\"GET_USERS\",payload:json});}case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchUsers(){return _ref.apply(this,arguments);};}();if(user){fetchUsers();}},[dispatch,user]);return/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(Table,{hover:true,responsive:true,variant:\"light\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date Created\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users&&users.map(function(user){return/*#__PURE__*/_jsx(AdminUserRows,{user:user},user._id);})})]})});};export default AdminUserListTable;","map":{"version":3,"names":["React","useEffect","useState","Badge","Table","useBookingsContext","useUsersContext","BookingsRows","useAuthContext","AdminUserRows","AdminUserListTable","user","users","dispatch","console","log","fetchUsers","fetch","headers","Authorization","token","response","json","ok","type","payload","map","_id"],"sources":["C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/src/components/tables/AdminUserListTable.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Badge from \"react-bootstrap/esm/Badge\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport { useBookingsContext } from \"../hooks/useBookingsContext\";\r\nimport { useUsersContext } from \"../hooks/useUsersContext\";\r\nimport BookingsRows from \"./BookingsRows\";\r\nimport { useAuthContext } from \"../hooks/useAuthContext\";\r\nimport AdminUserRows from \"./AdminUserRows\";\r\n\r\nconst AdminUserListTable = () => {\r\n  const { user } = useAuthContext();\r\n  const { users, dispatch } = useUsersContext();\r\n  console.log(users);\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      const response = await fetch(\"/api/users/\", {\r\n        headers: { Authorization: `Bearer ${user.token}` },\r\n      }); // fetch data from the server\r\n      const json = await response.json(); // pass to a variable to use the data\r\n\r\n      // check if response is ok\r\n      if (response.ok) {\r\n        dispatch({ type: \"GET_USERS\", payload: json });\r\n      }\r\n    };\r\n    if (user) {\r\n      fetchUsers();\r\n    }\r\n  }, [dispatch, user]);\r\n\r\n  return (\r\n    <div className=\"\">\r\n      <Table hover responsive variant=\"light\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID Number</th>\r\n            <th>Name</th>\r\n            <th>User Type</th>\r\n            <th>Date Created</th>\r\n            <th>Email</th>\r\n            <th>Phone</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users &&\r\n            users.map((user) => <AdminUserRows key={user._id} user={user} />)}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminUserListTable;\r\n"],"mappings":"kTAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,MAAK,KAAM,2BAA2B,CAC7C,MAAOC,MAAK,KAAM,uBAAuB,CACzC,OAASC,kBAAkB,KAAQ,6BAA6B,CAChE,OAASC,eAAe,KAAQ,0BAA0B,CAC1D,MAAOC,aAAY,KAAM,gBAAgB,CACzC,OAASC,cAAc,KAAQ,yBAAyB,CACxD,MAAOC,cAAa,KAAM,iBAAiB,CAAC,wFAE5C,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,EAAS,CAC/B,oBAAiBF,cAAc,EAAE,CAAzBG,IAAI,iBAAJA,IAAI,CACZ,qBAA4BL,eAAe,EAAE,CAArCM,KAAK,kBAALA,KAAK,CAAEC,QAAQ,kBAARA,QAAQ,CACvBC,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC,CAClBX,SAAS,CAAC,UAAM,CACd,GAAMe,WAAU,4FAAG,6KACMC,MAAK,CAAC,aAAa,CAAE,CAC1CC,OAAO,CAAE,CAAEC,aAAa,kBAAYR,IAAI,CAACS,KAAK,CAAG,CACnD,CAAC,CAAC,QAFIC,QAAQ,qCAGKA,SAAQ,CAACC,IAAI,EAAE,QAA5BA,IAAI,eAA0B;AAEpC;AACA,GAAID,QAAQ,CAACE,EAAE,CAAE,CACfV,QAAQ,CAAC,CAAEW,IAAI,CAAE,WAAW,CAAEC,OAAO,CAAEH,IAAK,CAAC,CAAC,CAChD,CAAC,sDACF,kBAVKN,WAAU,0CAUf,CACD,GAAIL,IAAI,CAAE,CACRK,UAAU,EAAE,CACd,CACF,CAAC,CAAE,CAACH,QAAQ,CAAEF,IAAI,CAAC,CAAC,CAEpB,mBACE,YAAK,SAAS,CAAC,EAAE,uBACf,MAAC,KAAK,EAAC,KAAK,MAAC,UAAU,MAAC,OAAO,CAAC,OAAO,wBACrC,oCACE,mCACE,iCAAkB,cAClB,4BAAa,cACb,iCAAkB,cAClB,oCAAqB,cACrB,6BAAc,cACd,6BAAc,GACX,EACC,cACR,uBACGC,KAAK,EACJA,KAAK,CAACc,GAAG,CAAC,SAACf,IAAI,qBAAK,KAAC,aAAa,EAAgB,IAAI,CAAEA,IAAK,EAArBA,IAAI,CAACgB,GAAG,CAAgB,GAAC,EAC7D,GACF,EACJ,CAEV,CAAC,CAED,cAAejB,mBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}