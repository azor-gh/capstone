{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nutzv\\\\OneDrive\\\\Desktop\\\\finaaaal\\\\Capstone_Azor\\\\azor\\\\src\\\\components\\\\forms\\\\EditBookingForm.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/esm/Button\";\nimport Row from \"react-bootstrap/esm/Row\";\nimport Col from \"react-bootstrap/esm/Col\";\nimport Alert from \"react-bootstrap/esm/Alert\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useBookingsContext } from \"../hooks/useBookingsContext\";\nimport Swal from \"sweetalert2\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport Services from \"./Services\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EditBookingForm = () => {\n  _s();\n  const {\n    user\n  } = useAuthContext();\n  const {\n    dispatch\n  } = useBookingsContext();\n  const {\n    id,\n    bookingId\n  } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  // const [inputField, setInputField] = useState([]);\n\n  const [date, setDate] = useState(\"\");\n  const [time_slot, setTimeSlot] = useState(\"\");\n  const [brand, setBrand] = useState(\"\");\n  const [model, setModel] = useState(\"\");\n  const [reg_num, setRegNum] = useState(\"\");\n  const [services, setServices] = useState([]);\n  const [remarks, setRemarks] = useState(\"\");\n  const [costs, setTotalCost] = useState(0);\n  const [user_phone, setUser_phone] = useState(\"\");\n  const [first_name, setFirst_name] = useState(\"\");\n  const [last_name, setLast_name] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [emptyFields, setEmptyFields] = useState([]);\n  console.log([date, time_slot, brand, model, services]);\n\n  //GET BOOKING DETAILS\n  useEffect(() => {\n    const getBooking = async () => {\n      const response = await fetch(`/api/bookings/${bookingId}`, {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      }); // fetch data from the server\n      const json = await response.json(); // pass to a variable to use the data\n\n      // check if response is ok\n      if (response.ok) {\n        let date = new Date(json.date).toISOString().slice(0, 10);\n        setDate(date);\n        setTimeSlot(json.time_slot);\n        setBrand(json.brand);\n        setModel(json.model);\n        setRegNum(json.reg_num);\n        setServices(json.services);\n        setTotalCost(parseInt(json.costs));\n        setRemarks(json.remarks);\n        setFirst_name(json.first_name);\n        setLast_name(json.last_name);\n        setUser_phone(json.user_phone);\n        setLoading(false);\n      }\n    };\n    if (user) {\n      getBooking();\n    }\n  }, [user]);\n\n  // let handleInput = (e) => {\n  //   e.persist();\n  //   setInputField({ ...inputField, [e.target.name]: e.target.value });\n  // };\n\n  // // SELECTED SERVICES  -\n  // const handleSelect = (e) => {\n  //   const checked = e.target.checked;\n  //   const value = e.target.value;\n  //   setServices(\n  //     checked ? [...services, value] : services.filter((item) => item !== value)\n  //   );\n  // };\n\n  // SELECTED SERVICES\n  const handleChange = (item, e) => {\n    const checked = e.target.checked;\n    const value = e.target.value;\n    setServices(checked ? [...services, value] : services.filter(service => service !== value));\n    setTotalCost(checked ? total => total + parseInt(item.price) : total => total - parseInt(item.price));\n    console.log(setTotalCost);\n  };\n  console.log(services);\n  const swalWithBootstrapButtons = Swal.mixin({\n    customClass: {\n      confirmButton: \"btn btn-success me-3\",\n      cancelButton: \"btn btn-danger\"\n    },\n    buttonsStyling: false\n  });\n  const handleCancel = () => {\n    swalWithBootstrapButtons.fire({\n      title: \"No Changes were made!\"\n    });\n    navigate(`/account/bookings`);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!user) {\n      setError(\"You must be logged in!\");\n      return;\n    }\n    console.log(emptyFields);\n    if (!date) {\n      setError(\"Date is required\");\n    } else if (!time_slot) {\n      setError(\"Time Slot is required\");\n    } else if (!user_phone) {\n      setError(\"Phone is required\");\n    } else if (!brand) {\n      setError(\"Brand is required\");\n    } else if (!model) {\n      setError(\"Model is required\");\n    } else if (!reg_num) {\n      setError(\"Registration Number is required\");\n    } else if (services.length === 0) {\n      emptyFields.push(\"services\");\n      setError(\"Please choose a service\");\n    } else {\n      swalWithBootstrapButtons.fire({\n        title: \"Are you sure?\",\n        text: \"Please take note of the changes you are about to make!\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Yes, update it!\"\n      }).then(result => {\n        if (result.isConfirmed) {\n          swalWithBootstrapButtons.fire(\"Updated!\", `Your appointment with Ref. Num. <strong>${bookingId}</strong> has been updated.`, \"success\");\n          updateMyBooking();\n        }\n      });\n    }\n  };\n  const updateMyBooking = async () => {\n    if (!user) {\n      setError(\"You must be logged in!\");\n      return;\n    }\n    const booking = {\n      date,\n      time_slot,\n      brand,\n      model,\n      reg_num,\n      services,\n      remarks,\n      user_phone,\n      costs\n    };\n    console.log(booking);\n    const response = await fetch(`/api/bookings/${bookingId}`, {\n      method: \"PATCH\",\n      body: JSON.stringify(booking),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    if (!response.ok) {\n      console.log(json.error);\n      setError(json.error);\n      setEmptyFields(json.emptyFields);\n    }\n    if (response.ok) {\n      setServices([]);\n      setError(null);\n      setEmptyFields([]);\n      console.log(\"Booking updated successfully\", json);\n      navigate(`/account/bookings`);\n    }\n  };\n\n  // const serviceList = [\n  //   { id: 1, service_name: \"Brakes\" },\n  //   { id: 2, service_name: \"Change Oil\" },\n  //   { id: 3, service_name: \"Tires & Batteries\" },\n  //   { id: 4, service_name: \"Maintenance\" },\n  //   { id: 5, service_name: \"MOT\" },\n  // ];\n\n  const serviceList = [{\n    id: 1,\n    service_name: \"Brakes\",\n    price: 500\n  }, {\n    id: 2,\n    service_name: \"Change Oil\",\n    price: 1500\n  }, {\n    id: 3,\n    service_name: \"Tires & Batteries\",\n    price: 300\n  }, {\n    id: 4,\n    service_name: \"Maintenance\",\n    price: 3000\n  }, {\n    id: 5,\n    service_name: \"MOT\",\n    price: 1500\n  }];\n  console.log(...(services === serviceList.service_name ? \"checked\" : \"\"));\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"border\",\n      variant: \"danger\",\n      size: \"lg\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"small\", {\n        children: \"Name: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-primary\",\n        children: [first_name, \" \", last_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3 mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: 12,\n          children: \"Reference Number:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: bookingId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: 6,\n          lg: 6,\n          xl: 6,\n          controlId: \"date\",\n          className: \"mb-3 \",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"fs-5\",\n            children: \"Date*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"date\",\n            name: \"date\",\n            placeholder: \"Date\",\n            min: new Date().toISOString().split(\"T\")[0],\n            onChange: e => setDate(e.target.value),\n            value: date,\n            className: emptyFields.includes(\"date\") ? \"error\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: 6,\n          lg: 6,\n          xl: 6,\n          controlId: \"timeSlot\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"fs-5\",\n            children: \"Prefer Time Slot*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n            id: \"time_slot\"\n            // name=\"time_slot\"\n            ,\n            onChange: e => setTimeSlot(e.target.value),\n            value: time_slot,\n            className: emptyFields.includes(\"timeSlot\") ? \"error\" : \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              disabled: true,\n              value: \"\",\n              children: \"Select Time Slot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Morning\",\n              children: \"Morning\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Afternoon\",\n              children: \"Afternoon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3 \",\n        children: /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: 6,\n          lg: 6,\n          xl: 6,\n          controlId: \"date\",\n          className: \"mb-3 \",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"fs-5\",\n            children: \"Phone*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            name: \"user_phone\",\n            placeholder: \"Phone\",\n            onChange: e => setUser_phone(e.target.value),\n            value: user_phone,\n            className: emptyFields.includes(\"user_phone\") ? \"error\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: 4,\n          lg: 4,\n          xl: 4,\n          controlId: \"brand\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"fs-5\",\n            children: \"Brand*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n            id: \"brand\"\n            // name=\"brand\"\n            ,\n            onChange: e => setBrand(e.target.value),\n            value: brand,\n            className: emptyFields.includes(\"brand\") ? \"error\" : \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              disabled: true,\n              value: \"\",\n              children: \"Select Brand\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Honda\",\n              children: \"Honda\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Kawasaki\",\n              children: \"Kawasaki\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Suzuki\",\n              children: \"Suzuki\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Yamaha\",\n              children: \"Yamaha\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: 4,\n          lg: 4,\n          xl: 4,\n          controlId: \"model\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"fs-5\",\n            children: \"Model*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: \"E.g. Beat, TMX125 Alpha, XRM125 DS\",\n            onChange: e => setModel(e.target.value),\n            value: model,\n            className: emptyFields.includes(\"model\") ? \"error\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: 4,\n          lg: 4,\n          xl: 4,\n          controlId: \"reg_num\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"fs-5\",\n            children: \"Reg Number*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: \"Registration Number\",\n            onChange: e => setRegNum(e.target.value),\n            value: reg_num,\n            className: emptyFields.includes(\"regNum\") ? \"error\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-5 mt-3 formGridCheckbox\",\n        id: \"formGridCheckbox\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          className: emptyFields.includes(\"services\") ? \"error \" : \"\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            sm: 12,\n            children: /*#__PURE__*/_jsxDEV(Form.Label, {\n              className: \"fs-3\",\n              children: \"Which type of service would you like to book?*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 12,\n            md: 8,\n            children: serviceList.map(item =>\n            /*#__PURE__*/\n            // <Form.Check\n            //   key={service.id}\n            //   type=\"checkbox\"\n            //   name=\"services\"\n            //   value={service.service_name}\n            //   onChange={handleSelect}\n            //   label={service.service_name}\n            //   checked={\n            //     services.includes(service.service_name) ? true : false\n            //   }\n            // <Services\n            //   key={item.id}\n            //   value={item.service_name}\n            //   handleChange={handleChange}\n            //   label={item.service_name}\n            //   item={item}\n            // />\n            _jsxDEV(Form.Check, {\n              type: \"checkbox\",\n              name: item.service_name,\n              value: item.service_name,\n              onChange: event => handleChange(item, event),\n              label: `${item.service_name} - ₱${item.price}`,\n              checked: services.includes(item.service_name) ? true : false\n            }, item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 12,\n            md: 4,\n            children: [\"Total Cost:\", \" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Php \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: costs\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          className: \"fs-5\",\n          children: \"Notes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          as: \"textarea\",\n          rows: 5,\n          onChange: e => setRemarks(e.target.value),\n          value: remarks,\n          placeholder: \"Message (Optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"me-4\",\n        variant: \"primary\",\n        size: \"md\",\n        type: \"submit\",\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-secondary\",\n        size: \"md\",\n        onClick: handleCancel,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(EditBookingForm, \"Yn5ogF58iA+Z6W4ddKM3EmVy99Q=\", false, function () {\n  return [useAuthContext, useBookingsContext, useParams, useNavigate];\n});\n_c = EditBookingForm;\nexport default EditBookingForm;\nvar _c;\n$RefreshReg$(_c, \"EditBookingForm\");","map":{"version":3,"names":["React","useEffect","useState","Form","Button","Row","Col","Alert","Spinner","useNavigate","useParams","useBookingsContext","Swal","useAuthContext","Services","EditBookingForm","user","dispatch","id","bookingId","navigate","loading","setLoading","date","setDate","time_slot","setTimeSlot","brand","setBrand","model","setModel","reg_num","setRegNum","services","setServices","remarks","setRemarks","costs","setTotalCost","user_phone","setUser_phone","first_name","setFirst_name","last_name","setLast_name","error","setError","emptyFields","setEmptyFields","console","log","getBooking","response","fetch","headers","Authorization","token","json","ok","Date","toISOString","slice","parseInt","handleChange","item","e","checked","target","value","filter","service","total","price","swalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","buttonsStyling","handleCancel","fire","title","handleSubmit","preventDefault","length","push","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","updateMyBooking","booking","method","body","JSON","stringify","serviceList","service_name","split","includes","map","event"],"sources":["C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/src/components/forms/EditBookingForm.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/esm/Button\";\r\nimport Row from \"react-bootstrap/esm/Row\";\r\nimport Col from \"react-bootstrap/esm/Col\";\r\nimport Alert from \"react-bootstrap/esm/Alert\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useBookingsContext } from \"../hooks/useBookingsContext\";\r\nimport Swal from \"sweetalert2\";\r\nimport { useAuthContext } from \"../hooks/useAuthContext\";\r\nimport Services from \"./Services\";\r\n\r\nconst EditBookingForm = () => {\r\n  const { user } = useAuthContext();\r\n  const { dispatch } = useBookingsContext();\r\n  const { id, bookingId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(true);\r\n  // const [inputField, setInputField] = useState([]);\r\n\r\n  const [date, setDate] = useState(\"\");\r\n  const [time_slot, setTimeSlot] = useState(\"\");\r\n  const [brand, setBrand] = useState(\"\");\r\n  const [model, setModel] = useState(\"\");\r\n  const [reg_num, setRegNum] = useState(\"\");\r\n  const [services, setServices] = useState([]);\r\n  const [remarks, setRemarks] = useState(\"\");\r\n  const [costs, setTotalCost] = useState(0);\r\n  const [user_phone, setUser_phone] = useState(\"\");\r\n  const [first_name, setFirst_name] = useState(\"\");\r\n  const [last_name, setLast_name] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [emptyFields, setEmptyFields] = useState([]);\r\n\r\n  console.log([date, time_slot, brand, model, services]);\r\n\r\n  //GET BOOKING DETAILS\r\n  useEffect(() => {\r\n    const getBooking = async () => {\r\n      const response = await fetch(`/api/bookings/${bookingId}`, {\r\n        headers: { Authorization: `Bearer ${user.token}` },\r\n      }); // fetch data from the server\r\n      const json = await response.json(); // pass to a variable to use the data\r\n\r\n      // check if response is ok\r\n      if (response.ok) {\r\n        let date = new Date(json.date).toISOString().slice(0, 10);\r\n        setDate(date);\r\n        setTimeSlot(json.time_slot);\r\n        setBrand(json.brand);\r\n        setModel(json.model);\r\n        setRegNum(json.reg_num);\r\n        setServices(json.services);\r\n        setTotalCost(parseInt(json.costs));\r\n        setRemarks(json.remarks);\r\n        setFirst_name(json.first_name);\r\n        setLast_name(json.last_name);\r\n        setUser_phone(json.user_phone);\r\n        setLoading(false);\r\n      }\r\n    };\r\n    if (user) {\r\n      getBooking();\r\n    }\r\n  }, [user]);\r\n\r\n  // let handleInput = (e) => {\r\n  //   e.persist();\r\n  //   setInputField({ ...inputField, [e.target.name]: e.target.value });\r\n  // };\r\n\r\n  // // SELECTED SERVICES  -\r\n  // const handleSelect = (e) => {\r\n  //   const checked = e.target.checked;\r\n  //   const value = e.target.value;\r\n  //   setServices(\r\n  //     checked ? [...services, value] : services.filter((item) => item !== value)\r\n  //   );\r\n  // };\r\n\r\n  // SELECTED SERVICES\r\n  const handleChange = (item, e) => {\r\n    const checked = e.target.checked;\r\n    const value = e.target.value;\r\n    setServices(\r\n      checked\r\n        ? [...services, value]\r\n        : services.filter((service) => service !== value)\r\n    );\r\n    setTotalCost(\r\n      checked\r\n        ? (total) => total + parseInt(item.price)\r\n        : (total) => total - parseInt(item.price)\r\n    );\r\n    console.log(setTotalCost);\r\n  };\r\n\r\n  console.log(services);\r\n\r\n  const swalWithBootstrapButtons = Swal.mixin({\r\n    customClass: {\r\n      confirmButton: \"btn btn-success me-3\",\r\n      cancelButton: \"btn btn-danger\",\r\n    },\r\n    buttonsStyling: false,\r\n  });\r\n\r\n  const handleCancel = () => {\r\n    swalWithBootstrapButtons.fire({ title: \"No Changes were made!\" });\r\n    navigate(`/account/bookings`);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!user) {\r\n      setError(\"You must be logged in!\");\r\n      return;\r\n    }\r\n    console.log(emptyFields);\r\n    if (!date) {\r\n      setError(\"Date is required\");\r\n    } else if (!time_slot) {\r\n      setError(\"Time Slot is required\");\r\n    } else if (!user_phone) {\r\n      setError(\"Phone is required\");\r\n    } else if (!brand) {\r\n      setError(\"Brand is required\");\r\n    } else if (!model) {\r\n      setError(\"Model is required\");\r\n    } else if (!reg_num) {\r\n      setError(\"Registration Number is required\");\r\n    } else if (services.length === 0) {\r\n      emptyFields.push(\"services\");\r\n      setError(\"Please choose a service\");\r\n    } else {\r\n      swalWithBootstrapButtons\r\n        .fire({\r\n          title: \"Are you sure?\",\r\n          text: \"Please take note of the changes you are about to make!\",\r\n          icon: \"warning\",\r\n          showCancelButton: true,\r\n          confirmButtonColor: \"#3085d6\",\r\n          cancelButtonColor: \"#d33\",\r\n          confirmButtonText: \"Yes, update it!\",\r\n        })\r\n        .then((result) => {\r\n          if (result.isConfirmed) {\r\n            swalWithBootstrapButtons.fire(\r\n              \"Updated!\",\r\n              `Your appointment with Ref. Num. <strong>${bookingId}</strong> has been updated.`,\r\n              \"success\"\r\n            );\r\n            updateMyBooking();\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  const updateMyBooking = async () => {\r\n    if (!user) {\r\n      setError(\"You must be logged in!\");\r\n      return;\r\n    }\r\n\r\n    const booking = {\r\n      date,\r\n      time_slot,\r\n      brand,\r\n      model,\r\n      reg_num,\r\n      services,\r\n      remarks,\r\n      user_phone,\r\n      costs,\r\n    };\r\n    console.log(booking);\r\n\r\n    const response = await fetch(`/api/bookings/${bookingId}`, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(booking),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    });\r\n    const json = await response.json();\r\n\r\n    if (!response.ok) {\r\n      console.log(json.error);\r\n      setError(json.error);\r\n      setEmptyFields(json.emptyFields);\r\n    }\r\n\r\n    if (response.ok) {\r\n      setServices([]);\r\n      setError(null);\r\n      setEmptyFields([]);\r\n      console.log(\"Booking updated successfully\", json);\r\n      navigate(`/account/bookings`);\r\n    }\r\n  };\r\n\r\n  // const serviceList = [\r\n  //   { id: 1, service_name: \"Brakes\" },\r\n  //   { id: 2, service_name: \"Change Oil\" },\r\n  //   { id: 3, service_name: \"Tires & Batteries\" },\r\n  //   { id: 4, service_name: \"Maintenance\" },\r\n  //   { id: 5, service_name: \"MOT\" },\r\n  // ];\r\n\r\n  const serviceList = [\r\n    { id: 1, service_name: \"Brakes\", price: 500 },\r\n    { id: 2, service_name: \"Change Oil\", price: 1500 },\r\n    { id: 3, service_name: \"Tires & Batteries\", price: 300 },\r\n    { id: 4, service_name: \"Maintenance\", price: 3000 },\r\n    { id: 5, service_name: \"MOT\", price: 1500 },\r\n  ];\r\n\r\n  console.log(...(services === serviceList.service_name ? \"checked\" : \"\"));\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <Spinner animation=\"border\" variant=\"danger\" size=\"lg\" />\r\n      ) : (\r\n        <Form onSubmit={handleSubmit}>\r\n          <small>Name: </small>\r\n          <h4 className=\"text-primary\">\r\n            {first_name} {last_name}\r\n          </h4>\r\n          {error && <Alert variant=\"danger\">{error}</Alert>}\r\n\r\n          <Row className=\"mb-3 mt-3\">\r\n            <Col sm={12}>Reference Number:</Col>\r\n            <Col>\r\n              <b>{bookingId}</b>\r\n            </Col>\r\n          </Row>\r\n          <Row className=\"mb-3\">\r\n            <Form.Group\r\n              as={Col}\r\n              md={6}\r\n              lg={6}\r\n              xl={6}\r\n              controlId=\"date\"\r\n              className=\"mb-3 \"\r\n            >\r\n              <Form.Label className=\"fs-5\">Date*</Form.Label>\r\n              <Form.Control\r\n                type=\"date\"\r\n                name=\"date\"\r\n                placeholder=\"Date\"\r\n                min={new Date().toISOString().split(\"T\")[0]}\r\n                onChange={(e) => setDate(e.target.value)}\r\n                value={date}\r\n                className={emptyFields.includes(\"date\") ? \"error\" : \"\"}\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group\r\n              as={Col}\r\n              md={6}\r\n              lg={6}\r\n              xl={6}\r\n              controlId=\"timeSlot\"\r\n              className=\"mb-3\"\r\n            >\r\n              <Form.Label className=\"fs-5\">Prefer Time Slot*</Form.Label>\r\n              <Form.Select\r\n                id=\"time_slot\"\r\n                // name=\"time_slot\"\r\n                onChange={(e) => setTimeSlot(e.target.value)}\r\n                value={time_slot}\r\n                className={emptyFields.includes(\"timeSlot\") ? \"error\" : \"\"}\r\n              >\r\n                <option disabled value=\"\">\r\n                  Select Time Slot\r\n                </option>\r\n                <option value=\"Morning\">Morning</option>\r\n                <option value=\"Afternoon\">Afternoon</option>\r\n              </Form.Select>\r\n            </Form.Group>\r\n          </Row>\r\n          <Row className=\"mb-3 \">\r\n            <Form.Group\r\n              as={Col}\r\n              md={6}\r\n              lg={6}\r\n              xl={6}\r\n              controlId=\"date\"\r\n              className=\"mb-3 \"\r\n            >\r\n              <Form.Label className=\"fs-5\">Phone*</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"user_phone\"\r\n                placeholder=\"Phone\"\r\n                onChange={(e) => setUser_phone(e.target.value)}\r\n                value={user_phone}\r\n                className={emptyFields.includes(\"user_phone\") ? \"error\" : \"\"}\r\n              />\r\n            </Form.Group>\r\n          </Row>\r\n          <Row>\r\n            <Form.Group\r\n              as={Col}\r\n              md={4}\r\n              lg={4}\r\n              xl={4}\r\n              controlId=\"brand\"\r\n              className=\"mb-3\"\r\n            >\r\n              <Form.Label className=\"fs-5\">Brand*</Form.Label>\r\n              <Form.Select\r\n                id=\"brand\"\r\n                // name=\"brand\"\r\n                onChange={(e) => setBrand(e.target.value)}\r\n                value={brand}\r\n                className={emptyFields.includes(\"brand\") ? \"error\" : \"\"}\r\n              >\r\n                <option disabled value=\"\">\r\n                  Select Brand\r\n                </option>\r\n                <option value=\"Honda\">Honda</option>\r\n                <option value=\"Kawasaki\">Kawasaki</option>\r\n                <option value=\"Suzuki\">Suzuki</option>\r\n                <option value=\"Yamaha\">Yamaha</option>\r\n              </Form.Select>\r\n            </Form.Group>\r\n            <Form.Group\r\n              as={Col}\r\n              md={4}\r\n              lg={4}\r\n              xl={4}\r\n              controlId=\"model\"\r\n              className=\"mb-3\"\r\n            >\r\n              <Form.Label className=\"fs-5\">Model*</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"E.g. Beat, TMX125 Alpha, XRM125 DS\"\r\n                onChange={(e) => setModel(e.target.value)}\r\n                value={model}\r\n                className={emptyFields.includes(\"model\") ? \"error\" : \"\"}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group\r\n              as={Col}\r\n              md={4}\r\n              lg={4}\r\n              xl={4}\r\n              controlId=\"reg_num\"\r\n              className=\"mb-3\"\r\n            >\r\n              <Form.Label className=\"fs-5\">Reg Number*</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"Registration Number\"\r\n                onChange={(e) => setRegNum(e.target.value)}\r\n                value={reg_num}\r\n                className={emptyFields.includes(\"regNum\") ? \"error\" : \"\"}\r\n              />\r\n            </Form.Group>\r\n          </Row>\r\n\r\n          <Form.Group\r\n            className=\"mb-5 mt-3 formGridCheckbox\"\r\n            id=\"formGridCheckbox\"\r\n          >\r\n            <Row className={emptyFields.includes(\"services\") ? \"error \" : \"\"}>\r\n              <Col sm={12}>\r\n                <Form.Label className=\"fs-3\">\r\n                  Which type of service would you like to book?*\r\n                </Form.Label>\r\n              </Col>\r\n              <Col sm={12} md={8}>\r\n                {serviceList.map((item) => (\r\n                  // <Form.Check\r\n                  //   key={service.id}\r\n                  //   type=\"checkbox\"\r\n                  //   name=\"services\"\r\n                  //   value={service.service_name}\r\n                  //   onChange={handleSelect}\r\n                  //   label={service.service_name}\r\n                  //   checked={\r\n                  //     services.includes(service.service_name) ? true : false\r\n                  //   }\r\n                  // <Services\r\n                  //   key={item.id}\r\n                  //   value={item.service_name}\r\n                  //   handleChange={handleChange}\r\n                  //   label={item.service_name}\r\n                  //   item={item}\r\n                  // />\r\n\r\n                  <Form.Check\r\n                    key={item.id}\r\n                    type=\"checkbox\"\r\n                    name={item.service_name}\r\n                    value={item.service_name}\r\n                    onChange={(event) => handleChange(item, event)}\r\n                    label={`${item.service_name} - ₱${item.price}`}\r\n                    checked={\r\n                      services.includes(item.service_name) ? true : false\r\n                    }\r\n                  />\r\n                ))}\r\n              </Col>\r\n              <Col sm={12} md={4}>\r\n                Total Cost:{\" \"}\r\n                <h4>\r\n                  Php <span>{costs}</span>\r\n                </h4>\r\n              </Col>\r\n            </Row>\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-5\">\r\n            <Form.Label className=\"fs-5\">Notes</Form.Label>\r\n            <Form.Control\r\n              as=\"textarea\"\r\n              rows={5}\r\n              onChange={(e) => setRemarks(e.target.value)}\r\n              value={remarks}\r\n              placeholder=\"Message (Optional)\"\r\n            />\r\n          </Form.Group>\r\n          <Button className=\"me-4\" variant=\"primary\" size=\"md\" type=\"submit\">\r\n            Update\r\n          </Button>\r\n          <Button variant=\"outline-secondary\" size=\"md\" onClick={handleCancel}>\r\n            Cancel\r\n          </Button>\r\n        </Form>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditBookingForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}