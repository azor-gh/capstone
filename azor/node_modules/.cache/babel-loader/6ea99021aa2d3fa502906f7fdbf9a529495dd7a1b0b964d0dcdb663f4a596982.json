{"ast":null,"code":"import _slicedToArray from\"C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import Badge from\"react-bootstrap/esm/Badge\";import Button from\"react-bootstrap/esm/Button\";import{Link}from\"react-router-dom\";import ViewBookingModal from\"../modals/ViewBookingModal\";import{useAuthContext}from\"../hooks/useAuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var BookingsRows=function BookingsRows(_ref){var booking=_ref.booking;var _useAuthContext=useAuthContext(),user=_useAuthContext.user;var bookdate=new Date(\"\".concat(booking.date)).toLocaleDateString();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];// const swalWithBootstrapButtons = Swal.mixin({\n//   customClass: {\n//     confirmButton: \"btn btn-success me-3\",\n//     cancelButton: \"btn btn-danger\",\n//   },\n//   buttonsStyling: false,\n// });\n// const handleSubmit = (e) => {\n//   e.preventDefault();\n//   if (!user) {\n//     setError(\"You must be logged in!\");\n//     return;\n//   } else {\n//     swalWithBootstrapButtons\n//       .fire({\n//         title: \"Are you sure?\",\n//         text: \"You won't be able to revert this!!\",\n//         icon: \"warning\",\n//         showCancelButton: true,\n//         confirmButtonColor: \"#3085d6\",\n//         cancelButtonColor: \"#d33\",\n//         confirmButtonText: \"Yes, cancel it!\",\n//       })\n//       .then((result) => {\n//         if (result.isConfirmed) {\n//           swalWithBootstrapButtons.fire(\n//             \"Booking Cancelled!\",\n//             `Booking with Ref. Num. <strong>${booking._id}</strong> has been cancelled.`,\n//             \"success\"\n//           );\n//           cancelBooking();\n//         }\n//       });\n//   }\n// };\n// const cancelBooking = async (e) => {\n//   if (!user) {\n//     setError(\"You must be logged in\");\n//     return;\n//   }\n//   const status = {\n//     stats: \"Cancel\",\n//   };\n//   console.log(status);\n//   const response = await fetch(`/api/bookings/cancel/${booking._id}`, {\n//     method: \"PATCH\",\n//     body: JSON.stringify(status),\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//       Authorization: `Bearer ${user.token}`,\n//     },\n//   });\n//   const json = await response.json();\n//   if (!response.ok) {\n//     console.log(json.error);\n//     setError(json.error);\n//   }\n//   if (response.ok) {\n//     console.log(\"Booking cancelled!\", json);\n//     // dispatch({ type: \"UPDATE_BOOKING\", payload: json });\n//     // navigate(`/account/user/${id}/bookings`);\n//   }\n// };\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){setShowModal(true);},children:[/*#__PURE__*/_jsx(\"td\",{children:booking._id}),/*#__PURE__*/_jsxs(\"td\",{children:[booking.first_name,\" \",booking.last_name]}),/*#__PURE__*/_jsx(\"td\",{children:bookdate}),/*#__PURE__*/_jsx(\"td\",{children:booking.time_slot}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h6\",{children:/*#__PURE__*/_jsx(Badge,{bg:booking.stats===\"Completed\"?\"success\":booking.stats===\"Pending\"?\"warning\":\"danger\",className:\"ms-auto\",children:booking.stats})})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",style:{width:\"1rem\"},children:booking.stats===\"Completed\"||booking.stats===\"Cancelled\"?\"\":/*#__PURE__*/_jsx(Button,{as:Link,to:\"/account/bookings/\".concat(booking._id,\"/complete-booking\"),size:\"sm\",className:\"btn-success\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-regular fa-square-check\"})})}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-center\",style:{width:\"1rem\"},children:[\" \",booking.stats===\"Completed\"||booking.stats===\"Cancelled\"?\"\":/*#__PURE__*/ // <form onSubmit={handleSubmit}>\n_jsx(Button,{size:\"sm\",className:\"btn-dark\",disabled:booking.stats===\"Completed\"?true:false// type=\"submit\"\n,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-xmark\"})})]})]}),/*#__PURE__*/_jsx(ViewBookingModal,{showModal:showModal,setShowModal:setShowModal,booking:booking,bookdate:bookdate})]});};export default BookingsRows;","map":{"version":3,"names":["React","useState","Badge","Button","Link","ViewBookingModal","useAuthContext","BookingsRows","booking","user","bookdate","Date","date","toLocaleDateString","showModal","setShowModal","_id","first_name","last_name","time_slot","stats","width"],"sources":["C:/Users/nutzv/OneDrive/Desktop/finaaaal/Capstone_Azor/azor/src/components/tables/BookingsRows.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Badge from \"react-bootstrap/esm/Badge\";\r\nimport Button from \"react-bootstrap/esm/Button\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ViewBookingModal from \"../modals/ViewBookingModal\";\r\nimport { useAuthContext } from \"../hooks/useAuthContext\";\r\n\r\nconst BookingsRows = ({ booking }) => {\r\n  const { user } = useAuthContext();\r\n\r\n  let bookdate = new Date(`${booking.date}`).toLocaleDateString();\r\n\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  // const swalWithBootstrapButtons = Swal.mixin({\r\n  //   customClass: {\r\n  //     confirmButton: \"btn btn-success me-3\",\r\n  //     cancelButton: \"btn btn-danger\",\r\n  //   },\r\n  //   buttonsStyling: false,\r\n  // });\r\n\r\n  // const handleSubmit = (e) => {\r\n  //   e.preventDefault();\r\n\r\n  //   if (!user) {\r\n  //     setError(\"You must be logged in!\");\r\n  //     return;\r\n  //   } else {\r\n  //     swalWithBootstrapButtons\r\n  //       .fire({\r\n  //         title: \"Are you sure?\",\r\n  //         text: \"You won't be able to revert this!!\",\r\n  //         icon: \"warning\",\r\n  //         showCancelButton: true,\r\n  //         confirmButtonColor: \"#3085d6\",\r\n  //         cancelButtonColor: \"#d33\",\r\n  //         confirmButtonText: \"Yes, cancel it!\",\r\n  //       })\r\n  //       .then((result) => {\r\n  //         if (result.isConfirmed) {\r\n  //           swalWithBootstrapButtons.fire(\r\n  //             \"Booking Cancelled!\",\r\n  //             `Booking with Ref. Num. <strong>${booking._id}</strong> has been cancelled.`,\r\n  //             \"success\"\r\n  //           );\r\n  //           cancelBooking();\r\n  //         }\r\n  //       });\r\n  //   }\r\n  // };\r\n\r\n  // const cancelBooking = async (e) => {\r\n  //   if (!user) {\r\n  //     setError(\"You must be logged in\");\r\n  //     return;\r\n  //   }\r\n\r\n  //   const status = {\r\n  //     stats: \"Cancel\",\r\n  //   };\r\n\r\n  //   console.log(status);\r\n  //   const response = await fetch(`/api/bookings/cancel/${booking._id}`, {\r\n  //     method: \"PATCH\",\r\n  //     body: JSON.stringify(status),\r\n  //     headers: {\r\n  //       \"Content-Type\": \"application/json\",\r\n  //       Authorization: `Bearer ${user.token}`,\r\n  //     },\r\n  //   });\r\n  //   const json = await response.json();\r\n\r\n  //   if (!response.ok) {\r\n  //     console.log(json.error);\r\n  //     setError(json.error);\r\n  //   }\r\n\r\n  //   if (response.ok) {\r\n  //     console.log(\"Booking cancelled!\", json);\r\n  //     // dispatch({ type: \"UPDATE_BOOKING\", payload: json });\r\n  //     // navigate(`/account/user/${id}/bookings`);\r\n  //   }\r\n  // };\r\n\r\n  return (\r\n    <>\r\n      <tr\r\n        onClick={() => {\r\n          setShowModal(true);\r\n        }}\r\n      >\r\n        <td>{booking._id}</td>\r\n        <td>\r\n          {booking.first_name} {booking.last_name}\r\n        </td>\r\n        <td>{bookdate}</td>\r\n        <td>{booking.time_slot}</td>\r\n        <td>\r\n          <h6>\r\n            <Badge\r\n              bg={\r\n                booking.stats === \"Completed\"\r\n                  ? \"success\"\r\n                  : booking.stats === \"Pending\"\r\n                  ? \"warning\"\r\n                  : \"danger\"\r\n              }\r\n              className=\"ms-auto\"\r\n            >\r\n              {booking.stats}\r\n            </Badge>\r\n          </h6>\r\n        </td>\r\n\r\n        <td className=\"text-center\" style={{ width: \"1rem\" }}>\r\n          {booking.stats === \"Completed\" || booking.stats === \"Cancelled\" ? (\r\n            \"\"\r\n          ) : (\r\n            <Button\r\n              as={Link}\r\n              to={`/account/bookings/${booking._id}/complete-booking`}\r\n              size=\"sm\"\r\n              className=\"btn-success\"\r\n            >\r\n              <i className=\"fa-regular fa-square-check\"></i>\r\n            </Button>\r\n          )}\r\n        </td>\r\n        <td className=\"text-center\" style={{ width: \"1rem\" }}>\r\n          {\" \"}\r\n          {booking.stats === \"Completed\" || booking.stats === \"Cancelled\" ? (\r\n            \"\"\r\n          ) : (\r\n            // <form onSubmit={handleSubmit}>\r\n            <Button\r\n              size=\"sm\"\r\n              className=\"btn-dark\"\r\n              disabled={booking.stats === \"Completed\" ? true : false}\r\n              // type=\"submit\"\r\n            >\r\n              <i className=\"fa-solid fa-xmark\"></i>\r\n            </Button>\r\n          )}\r\n        </td>\r\n      </tr>\r\n\r\n      <ViewBookingModal\r\n        showModal={showModal}\r\n        setShowModal={setShowModal}\r\n        booking={booking}\r\n        bookdate={bookdate}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BookingsRows;\r\n"],"mappings":"iJAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAOC,MAAK,KAAM,2BAA2B,CAC7C,MAAOC,OAAM,KAAM,4BAA4B,CAC/C,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAOC,iBAAgB,KAAM,4BAA4B,CACzD,OAASC,cAAc,KAAQ,yBAAyB,CAAC,6IAEzD,GAAMC,aAAY,CAAG,QAAfA,aAAY,MAAoB,IAAdC,QAAO,MAAPA,OAAO,CAC7B,oBAAiBF,cAAc,EAAE,CAAzBG,IAAI,iBAAJA,IAAI,CAEZ,GAAIC,SAAQ,CAAG,GAAIC,KAAI,WAAIH,OAAO,CAACI,IAAI,EAAG,CAACC,kBAAkB,EAAE,CAE/D,cAAkCZ,QAAQ,CAAC,KAAK,CAAC,wCAA1Ca,SAAS,eAAEC,YAAY,eAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA,mBACE,wCACE,YACE,OAAO,CAAE,kBAAM,CACbA,YAAY,CAAC,IAAI,CAAC,CACpB,CAAE,wBAEF,oBAAKP,OAAO,CAACQ,GAAG,EAAM,cACtB,sBACGR,OAAO,CAACS,UAAU,KAAGT,OAAO,CAACU,SAAS,GACpC,cACL,oBAAKR,QAAQ,EAAM,cACnB,oBAAKF,OAAO,CAACW,SAAS,EAAM,cAC5B,iCACE,iCACE,KAAC,KAAK,EACJ,EAAE,CACAX,OAAO,CAACY,KAAK,GAAK,WAAW,CACzB,SAAS,CACTZ,OAAO,CAACY,KAAK,GAAK,SAAS,CAC3B,SAAS,CACT,QACL,CACD,SAAS,CAAC,SAAS,UAElBZ,OAAO,CAACY,KAAK,EACR,EACL,EACF,cAEL,WAAI,SAAS,CAAC,aAAa,CAAC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,UAClDb,OAAO,CAACY,KAAK,GAAK,WAAW,EAAIZ,OAAO,CAACY,KAAK,GAAK,WAAW,CAC7D,EAAE,cAEF,KAAC,MAAM,EACL,EAAE,CAAEhB,IAAK,CACT,EAAE,6BAAuBI,OAAO,CAACQ,GAAG,qBAAoB,CACxD,IAAI,CAAC,IAAI,CACT,SAAS,CAAC,aAAa,uBAEvB,UAAG,SAAS,CAAC,4BAA4B,EAAK,EAEjD,EACE,cACL,YAAI,SAAS,CAAC,aAAa,CAAC,KAAK,CAAE,CAAEK,KAAK,CAAE,MAAO,CAAE,WAClD,GAAG,CACHb,OAAO,CAACY,KAAK,GAAK,WAAW,EAAIZ,OAAO,CAACY,KAAK,GAAK,WAAW,CAC7D,EAAE,eAEF;AACA,KAAC,MAAM,EACL,IAAI,CAAC,IAAI,CACT,SAAS,CAAC,UAAU,CACpB,QAAQ,CAAEZ,OAAO,CAACY,KAAK,GAAK,WAAW,CAAG,IAAI,CAAG,KACjD;AAAA,uBAEA,UAAG,SAAS,CAAC,mBAAmB,EAAK,EAExC,GACE,GACF,cAEL,KAAC,gBAAgB,EACf,SAAS,CAAEN,SAAU,CACrB,YAAY,CAAEC,YAAa,CAC3B,OAAO,CAAEP,OAAQ,CACjB,QAAQ,CAAEE,QAAS,EACnB,GACD,CAEP,CAAC,CAED,cAAeH,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}